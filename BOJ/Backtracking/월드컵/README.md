## 월드컵 - 6987

[문제 링크](https://www.acmicpc.net/problem/6987)

### 구분

브루트포스, 백트래킹

### 풀이 요약

첫 시도에서는 승, 무, 패의 합의 규칙을 만들어서 그것을 만족하는지 판단하도록 구현하였는데 실패하였습니다. 반례를 모두 고려하지 못한 풀이였기 때문에 모든 경우의 수를 계산하는 dfs를 적용해야겠다는 생각이 들었습니다.

하지만 dfs의 경우 시간초과가 발생하기 때문에, 효율성을 높이는 가지치기 방식인 백트래킹 방식을 추가로 적용하는 것이 필요했습니다.

알고리즘은 다음과 같습니다.

1. 첫 경기부터 15번째 경기까지의 조합을 미리 계산해둡니다.
2. dfs를 통해 값이 1이상인 경우 승무패를 차례대로 감소 시킵니다.
3. 15번째 경기에 도달했을 때 전체의 승무패의 합이 0이 되는지 판단하고(백트래킹) 정답 배열에 추가합니다.

### 나의 풀이

```python
import sys
from itertools import combinations

input = sys.stdin.readline

answer = []
game = list(combinations(range(6), 2))

def dfs(round):
    global count
    if round == 15:
        count = 1
        for sub in result:
            if sub.count(0) != 3:
                count = 0
                break
        return

    team1, team2 = game[round]
    for pos1, pos2 in ((0, 2), (1, 1), (2, 0)):
      if result[team1][pos1] > 0 and result[team2][pos2] > 0:
        result[team1][pos1] -= 1
        result[team2][pos2] -= 1
        dfs(round + 1)
        result[team1][pos1] += 1
        result[team2][pos2] += 1

for _ in range(4):
  data = list(map(int, input().split()))
  result = [data[i:i + 3] for i in range(0, 16, 3)]

  count = 0
  dfs(0)
  answer.append(count)

print(*answer)
```

### 배운 점

백트래킹과 dfs 개념에 대해서 정리할 수 있는 문제였습니다. 이번 문제를 통해 백트래킹이란 DFS의 효율성을 높이는 가지치기 방식을 사용한다는 것과, 문제 풀이에서 가지치기를 어떻게 적용할 수 있는지에 대해 배울 수 있었습니다.

### DFS

가능한 모든 경로를 탐색합니다. 따라서 불필요할 것 같은 경로를 사전에 차단하지 못합니다. N!가지의 경우의 수를 가진 문제는 DFS로 처리가 불가능할 것입니다.

### 백트래킹

해를 찾는 도중 해가 아니라면, 되돌아가서 다시 해를 찾는 기법을 말합니다. 되돌아가는 과정을 **가지치기**라고 하는데, 이에 따라 효율성이 결정됩니다.

문제 풀이에서는 주로 **조건문** 등을 걸어 답이 절대로 될 수 없는 상황을 정의하고, 그러한 상황인 경우엔 **그 이전으로 돌아가서** 다른 경우를 탐색할 수 있게 합니다.

**문제에서 적용한 백트래킹 부분**

```python
# 마지막 라운드라면 계산 종료
if round == 15:
	count = 1
	for sub in result:
		# 답이 절대로 될 수 없는 경우 탈출
	  if sub.count(0) != 3:
	    count = 0
      break
  return
```

### 문제 설명

월드컵 조별 최종 예선에서는 6개국으로 구성된 각 조별로 동일한 조에 소속된 국가들과 한 번씩, 각 국가별로 총 5번의 경기를 치른다. 조별리그가 끝난 후, 기자가 보내온 각 나라의 승, 무승부, 패의 수가 가능한 결과인지를 판별하려고 한다.

네 가지의 결과가 주어질 때 각각의 결과에 대하여 가능하면 1, 불가능하면 0을 출력하는 프로그램을 작성하시오.

### 입력

첫째 줄부터 넷째 줄까지 각 줄마다 6개국의 결과가 나라별로 승, 무승부, 패의 순서로 빈칸을 하나 사이에 두고 18개의 숫자로 주어진다. 승, 무, 패의 수는 6보다 작거나 같은 자연수 또는 0이다.

### 출력

입력에서 주어진 네 가지 결과에 대하여 가능한 결과는 1, 불가능한 결과는 0을 빈칸을 하나 사이에 두고 출력한다.

### 예제 입력1

```
5 0 0 3 0 2 2 0 3 0 0 5 4 0 1 1 0 4
4 1 0 3 0 2 4 1 0 1 1 3 0 0 5 1 1 3
5 0 0 4 0 1 2 2 1 2 0 3 1 0 4 0 0 5
5 0 0 3 1 1 2 1 2 2 0 3 0 0 5 1 0 4
```

### 예제 출력 1

```
1 1 0 0
```
